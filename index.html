<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Ipl | </title>
    <link rel="shortcut icon" href="/images/favicon.ico">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- build:css styles/main.css -->
<script
  src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>
  <script>
      
      /*
 jQuery AJAX Cross Origin v1.3 (http://www.ajax-cross-origin.com) 
 jQuery plugin to bypass Same-origin_policy using Google Apps Script. 
 
 references:
 http://en.wikipedia.org/wiki/Same-origin_policy
 http://www.google.com/script/start/
 
 (c) 2014, Writen by Erez Ninio. site: www.dealhotelbook.com
 
 Licensed under the Creative Commons Attribution 3.0 Unported License. 
 For details, see http://creativecommons.org/licenses/by/3.0/.
*/

var proxyJsonp="https://script.google.com/macros/s/AKfycbwmqG55tt2d2FcT_WQ3WjCSKmtyFpkOcdprSITn45-4UgVJnzp9/exec";
jQuery.ajaxOrig=jQuery.ajax;jQuery.ajax=function(a,b){function d(a){a=encodeURI(a).replace(/&/g,"%26");return proxyJsonp+"?url="+a+"&callback=?"}var c="object"===typeof a?a:b||{};c.url=c.url||("string"===typeof a?a:"");var c=jQuery.ajaxSetup({},c),e=function(a,c){var b=document.createElement("a");b.href=a;return c.crossOrigin&&"http"==a.substr(0,4).toLowerCase()&&"localhost"!=b.hostname&&"127.0.0.1"!=b.hostname&&b.hostname!=window.location.hostname}(c.url,c);c.proxy&&0<c.proxy.length&&(proxyJsonp=c.proxy,"object"===typeof a?
a.crossDomain=!0:"object"===typeof b&&(b.crossDomain=!0));e&&("object"===typeof a?a.url&&(a.url=d(a.url),a.charset&&(a.url+="&charset="+a.charset),a.dataType="json"):"string"===typeof a&&"object"===typeof b&&(a=d(a),b.charset&&(a+="&charset="+b.charset),b.dataType="json"));return jQuery.ajaxOrig.apply(this,arguments)};jQuery.ajax.prototype=new jQuery.ajaxOrig;jQuery.ajax.prototype.constructor=jQuery.ajax;



  </script>
  
    <!-- endbuild -->

    <!-- build:js({source, dist}) js/vendor.js -->

    


    <!-- endbuild -->
</head>
<style type="text/css" media="screen">
    #cb-main-menu,#chat-container,.cb-footer,.cb-col.cb-col-33.cb-col-rt,.cb-nav-bar,nav,#leaderboard{
        display: none!important;
    }    
    .cb-col-67{
        width: 100%!important
    }
h1 {
    
    text-align: center;
}
</style>
<body class="home" ">
    <h1>Current IPL match</h1>

      
    <div id="scoreUpdate">
        
    </div> 

    <div id="commentry">
        

    </div>


<main>
	
</main>

<script type="text/javascript">

var z;
test();

function test(){

//     $.ajax("http://synd.cricbuzz.com/j2me/1.0/livematches.xml?test="+new Date().getMilliseconds()
// ).done(function(data){
//     var jsonText = JSON.stringify(xmlToJson(data));
//     //console.log(JSON.parse(jsonText).mchdata.match);
//     window.z = JSON.parse(jsonText);
//             $("#scoreUpdate").html("");
//     $.each([z.mchdata.match[0]],function(v,i){
//         $("#scoreUpdate").append("<li>"+this["@attributes"].mchDesc + " overs:" + this.mscr.btTm.Inngs["@attributes"].ovrs +" Runs: "+ this.mscr.btTm.Inngs["@attributes"].r  +"/" + this.mscr.btTm.Inngs["@attributes"].wkts+"</li>")
// });

// });

$.ajax({
        crossOrigin: true,
        url: "https://www.cricbuzz.com/live-cricket-scorecard/18155/gl-vs-mi-35th-match-indian-premier-league-2017",
        success: function(data) {
            console.log(data);
              data = data.replace("http","https");
        // if(data.comm_lines[0].comm!==undefined && z!==data.comm_lines[0].comm){
        //         z = data.comm_lines[0].comm;
        //        $("#commentry").append("<li>"+data.comm_lines[0].comm+"</li>") 
        // }

        // $("#scoreUpdate").html("<li>"+data.score.batting.innings[0].score+ "/"+data.score.batting.innings[0].wkts+"</li>") 
        $("#scoreUpdate").html(data);
        }
    });



}
    
setInterval(test,15000);
function xmlToJson(xml) {

    // Create the return object
    var obj = {};

    if (xml.nodeType == 1) { // element
        // do attributes
        if (xml.attributes.length > 0) {
        obj["@attributes"] = {};
            for (var j = 0; j < xml.attributes.length; j++) {
                var attribute = xml.attributes.item(j);
                obj["@attributes"][attribute.nodeName] = attribute.nodeValue;
            }
        }
    } else if (xml.nodeType == 3) { // text
        obj = xml.nodeValue;
    }

    // do children
    if (xml.hasChildNodes()) {
        for(var i = 0; i < xml.childNodes.length; i++) {
            var item = xml.childNodes.item(i);
            var nodeName = item.nodeName;
            if (typeof(obj[nodeName]) == "undefined") {
                obj[nodeName] = xmlToJson(item);
            } else {
                if (typeof(obj[nodeName].push) == "undefined") {
                    var old = obj[nodeName];
                    obj[nodeName] = [];
                    obj[nodeName].push(old);
                }
                obj[nodeName].push(xmlToJson(item));
            }
        }
    }
    return obj;
};



</script>
     
</body>
   
</html>

